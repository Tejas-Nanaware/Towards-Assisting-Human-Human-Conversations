<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test JS</title>
</head>

<body>
    <h1>Chat Framework API Test</h1>
    <input type="text" id="text" />
    <button id="submit">Get Response</button>
    <p id="DialoGPT">DialoGPT: </p>
    <p id="Blenderbot">Blenderbot: </p>
    <script>
        window.onload = function () {
            var btn = document.getElementById("submit");
            if (btn.addEventListener) {
                btn.addEventListener("click", btnClick, false);
            } else if (btn.attachEvent) {
                btn.attachEvent("onclick", btnClick);
            }
        };
        function btnClick() {

            var Blenderbot_url = "http://127.0.0.1:5000/api/v1/Blenderbot?text=";
            var DialoGPT_url = "http://127.0.0.1:5000/api/v1/DialoGPT?text=";
            var text = document.getElementById('text').value;
            
            var Blenderbot_request = Blenderbot_url + text;
            var DialoGPT_request = DialoGPT_url + text;

            fetch(Blenderbot_request).then(response => {
                if (response.ok) {
                    return response.json();
                }
            }).then(Blenderbot_response => {
                console.log(Blenderbot_response);
                document.getElementById('Blenderbot').innerHTML = Blenderbot_response['reply'];
            });
            fetch(DialoGPT_request).then(response => {
                if (response.ok) {
                    return response.json();
                }
            }).then(DialoGPT_response => {
                console.log(DialoGPT_response);
                document.getElementById('DialoGPT').innerHTML = DialoGPT_response['reply'];
            });
        }
    </script>
</body>

</html>